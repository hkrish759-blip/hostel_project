<!DOCTYPE html>
<html>
<head>
    <title>Warden Dashboard</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            padding: 20px; 
            background: url("{{ url_for('static', filename='images/image.png') }}") no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            color: #333; 
        }
        h2, h3 { color: #2c3e50; }
        .box { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(5px); padding: 25px; margin-bottom: 25px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.08); }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; background: #fff; }
        th, td { border: 1px solid #e1e4e8; padding: 12px; text-align: left; }
        th { background: #f8f9fa; font-weight: 600; color: #555; }
        button { padding: 10px 18px; background: #007bff; color: #fff; border: none; border-radius: 5px; cursor: pointer; font-size: 14px; transition: 0.2s; }
        button:hover { background: #0056b3; }
        input, select { padding: 10px; width: 100%; max-width: 300px; margin: 8px 0; border: 1px solid #ced4da; border-radius: 4px; box-sizing: border-box; }
        img { width: 120px; height: 120px; object-fit: cover; margin: 5px; border-radius: 4px; border: 1px solid #ddd; }
        a { color: #dc3545; text-decoration: none; font-weight: bold; float: right; }
        a:hover { text-decoration: underline; }
        hr { border: 0; border-top: 1px solid #ddd; margin: 20px 0; }
        .status-input { width: 100%; padding: 8px; margin: 2px 0; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>

<h2>üëÆ Warden Dashboard - {{ session.college }}</h2>
<a href="/logout">Logout</a>
<hr>

<!-- ================= ADD HOSTEL ================= -->
<div class="box">
    <h3>‚ûï Add Hostel</h3>
    <form method="POST" action="/warden/add_hostel">
        <input type="text" name="hostel_name" placeholder="Hostel Name" required>
        <input type="number" name="total_rooms" placeholder="Total Rooms" required>
        <button type="submit">Add Hostel</button>
    </form>
</div>

<!-- ================= MANAGE ROOM CONDITIONS ================= -->
<div class="box">
    <h3>üõ†Ô∏è Manage Room Conditions</h3>
    <table>
        <thead>
            <tr>
                <th>Room</th>
                <th>Capacity</th>
                <th>Facilities (AC, Fan, etc.)</th>
                <th>Damage Report</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for r in rooms %}
            <tr>
                <form method="POST" action="/warden/update_room">
                    <input type="hidden" name="room_id" value="{{ r.id }}">
                    <td>{{ r.hostel_name }} - {{ r.room_number }}</td>
                    <td><input type="number" name="capacity" value="{{ r.capacity }}" style="width:60px;"></td>
                    <td><input type="text" name="facilities" value="{{ r.facilities }}" class="status-input"></td>
                    <td><input type="text" name="damage" value="{{ r.damage }}" class="status-input"></td>
                    <td><button type="submit" style="padding:5px 10px; font-size:12px;">Update</button></td>
                </form>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- ================= TAKE ATTENDANCE ================= -->
<div class="box">
    <h3>üìÖ Mark Attendance</h3>
    <form method="POST" action="/warden/attendance">
        <label>Select Student:</label>
        <select name="student_id" required>
            {% for s in students %}
                <option value="{{ s.id }}">{{ s.username }}</option>
            {% endfor %}
        </select><br>
        <label>Date:</label>
        <input type="date" name="date" required><br>
        <label>Status:</label>
        <select name="status" required>
            <option value="Present">Present</option>
            <option value="Absent">Absent</option>
        </select><br>
        <button type="submit">Mark Attendance</button>
    </form>

    <h4>Attendance Records</h4>
    <table>
        <tr><th>Student</th><th>Date</th><th>Status</th></tr>
        {% for a in attendance %}
            <tr>
                <td>{{ a.username }}</td>
                <td>{{ a.date }}</td>
                <td>{{ a.status }}</td>
            </tr>
        {% endfor %}
    </table>
</div>

<!-- ================= UPLOAD ROOM PHOTO ================= -->
<div class="box">
    <h3>üñºÔ∏è Upload Room Photo</h3>
    <form method="POST" enctype="multipart/form-data" action="/warden/photo">
        <label>Select Hostel:</label>
        <select name="hostel_id" required>
            {% for h in hostels %}
                <option value="{{ h.id }}">{{ h.name }}</option>
            {% endfor %}
        </select><br>

        <label>Select Room:</label>
        <select name="room_id" required>
            {% for r in rooms %}
                <option value="{{ r.id }}">{{ r.hostel_name }} - {{ r.room_number }}</option>
            {% endfor %}
        </select><br>

        <input type="file" name="photo" accept="image/*" required>
        <button type="submit">Upload Photo</button>
    </form>

    <h4>Uploaded Photos</h4>
    {% for p in photos %}
        <div style="display:inline-block; text-align:center;">
            <img src="/static/uploads/{{ p.filename }}">
            <br>
            <small>{{ p.hostel_name }} - {{ p.room_number }}</small>
        </div>
    {% endfor %}
</div>

</body>
</html>